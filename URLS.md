# –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üåê –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø

### FastAPI –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **API**: http://89.111.155.164:8002
- **Health Check**: http://89.111.155.164:8002/health
- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)**: http://89.111.155.164:8002/docs
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (ReDoc)**: http://89.111.155.164:8002/redoc

### Docker Registry
- **API Endpoint**: http://89.111.155.164:5000/v2/
- **–°–ø–∏—Å–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤**: http://89.111.155.164:5000/v2/_catalog
- **–°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ –æ–±—Ä–∞–∑–∞**: http://89.111.155.164:5000/v2/{image-name}/tags/list

---

## üìã –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### 1. FastAPI –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Ä—Ç 8002)

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:**
- `GET /` - –ö–æ—Ä–Ω–µ–≤–æ–π endpoint
- `GET /health` - Health check
- `GET /api/v1/items/{item_id}` - –ü—Ä–∏–º–µ—Ä API endpoint

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://89.111.155.164:8002/

# Health check
curl http://89.111.155.164:8002/health

# API endpoint
curl http://89.111.155.164:8002/api/v1/items/123
```

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ: http://89.111.155.164:8002/docs –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

### 2. Docker Registry (–ø–æ—Ä—Ç 5000)

**–í–∞–∂–Ω–æ:** Registry —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP, –Ω–µ HTTPS!

**API Endpoints:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl http://89.111.155.164:5000/v2/

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
curl http://89.111.155.164:5000/v2/_catalog

# –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞
curl http://89.111.155.164:5000/v2/test-hello/tags/list
```

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ: http://89.111.155.164:5000/v2/_catalog –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –°—Ç–∞—Ç—É—Å FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd /opt/fastapi-app && docker compose ps

# –°—Ç–∞—Ç—É—Å Registry –∏ Auto-updater
cd /root/Autodeploy && docker compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tlnp | grep -E "(5000|8002)"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ FastAPI
curl -I http://localhost:8002/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Registry
curl -I http://localhost:5000/v2/
```

---

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
   ```bash
   docker ps | grep fastapi-app
   docker ps | grep registry
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   # FastAPI
   cd /opt/fastapi-app && docker compose logs --tail=50
   
   # Registry
   cd /root/Autodeploy && docker compose logs registry
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
   ```bash
   # FastAPI
   cd /opt/fastapi-app && docker compose restart
   
   # Registry
   cd /root/Autodeploy && docker compose restart registry
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã:**
   ```bash
   # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã 5000 –∏ 8002
   netstat -tlnp | grep -E "(5000|8002)"
   ```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞**: `89.111.155.164`
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP**: `192.168.0.91` (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
- **Registry**: –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP (–Ω–µ HTTPS)
- **FastAPI**: –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ `/docs`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS —á–µ—Ä–µ–∑ nginx reverse proxy
2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Registry (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –≤ FastAPI –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç–∞–º

